{"version":3,"sources":["webpack://ClapprStats/webpack/universalModuleDefinition","webpack://ClapprStats/webpack/bootstrap","webpack://ClapprStats/./node_modules/lodash.get/index.js","webpack://ClapprStats/(webpack)/buildin/global.js","webpack://ClapprStats/./src/clappr-stats.js","webpack://ClapprStats/external \"Clappr\""],"names":["FUNC_ERROR_TEXT","HASH_UNDEFINED","INFINITY","funcTag","genTag","symbolTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reRegExpChar","reEscapeChar","reIsHostCtor","freeGlobal","global","Object","freeSelf","self","root","Function","getValue","object","key","undefined","isHostObject","value","result","toString","e","arrayProto","Array","prototype","funcProto","objectProto","coreJsData","maskSrcKey","uid","exec","keys","IE_PROTO","funcToString","hasOwnProperty","objectToString","reIsNative","RegExp","call","replace","Symbol","splice","Map","getNative","nativeCreate","symbolProto","symbolToString","Hash","entries","index","length","clear","entry","set","hashClear","__data__","hashDelete","has","hashGet","data","hashHas","hashSet","get","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","pop","listCacheGet","listCacheHas","listCacheSet","push","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","array","eq","baseGet","path","isKey","castPath","toKey","baseIsNative","isObject","isMasked","pattern","isFunction","test","toSource","baseToString","isSymbol","isArray","stringToPath","map","isKeyable","type","func","memoize","string","match","number","quote","resolver","TypeError","memoized","args","arguments","apply","cache","Cache","other","tag","isObjectLike","defaultValue","module","exports","g","window","ClapprStats","hasPerformanceSupport","performance","now","Date","counter","_metrics","counters","timer","_now","timers","metrics","console","log","min","container","playback","name","getPlaybackType","_runEach","_onReport","_defaultReport","_uriToMeasureLatency","_urisToMeasureBandwidth","_runBandwidthTestEvery","_bwMeasureCount","_completion","watch","calls","_newMetrics","on","REPORT_EVENT","listenTo","CONTAINER_BITRATE","onBitrate","CONTAINER_STOP","stopReporting","CONTAINER_ENDED","listenToOnce","PLAYBACK_PLAY_INTENT","startTimers","CONTAINER_PLAY","onFirstPlaying","onPlay","CONTAINER_PAUSE","onPause","CONTAINER_STATE_BUFFERING","onBuffering","CONTAINER_SEEK","onSeek","CONTAINER_ERROR","_inc","CONTAINER_FULLSCREEN","CONTAINER_PLAYBACKDVRSTATECHANGED","dvrInUse","PLAYBACK_PROGRESS","onProgress","PLAYBACK_TIMEUPDATE","onTimeUpdate","newBitrate","bitrate","parseInt","extra","bitratesHistory","beforeLast","end","time","start","_buildReport","clearInterval","_intervalId","stopListening","bindEvents","setInterval","bind","_start","CONTAINER_TIMEUPDATE","onContainerUpdateWhilePlaying","_stop","playAfterPause","watchHistory","current","total","l","duration","currentTime","watchedPercentage","lastBitrate","_onCompletion","isPlaying","CONTAINER_STATE_BUFFERFULL","onBufferfull","progress","buffersize","play","pause","error","buffering","decodedFrames","droppedFrames","fps","changeLevel","seek","fullscreen","dvrUsage","startup","session","latency","playbackName","playbackType","bitrateWeightedMean","bitrateMostUsed","bufferingPercentage","bandwidth","currentPercentage","allPercentages","isCalled","indexOf","info","trigger","PERCENTAGE_EVENT","_playbackName","_playbackType","_calculateBitrates","_calculatePercentages","_fetchFPS","_measureLatency","_measureBandwidth","JSON","parse","stringify","fetchFPS","_html5FetchFPS","totalTime","x","reduce","a","b","slice","sort","videoTag","el","webkitDecodedFrameCount","mozDecodedFrames","webkitDroppedFrameCount","mozParsedFrames","decodedFramesLastTime","_lastDecodedFramesCount","t","n","rtt","ld","done","img","Image","onload","src","Math","random","i","clearTimeout","expired","xhr","XMLHttpRequest","open","url","responseType","onabort","setTimeout","j","abort","timeout","send","timeSpent","bandwidthBps","loaded","forEach"],"mappings":"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","file":"clappr-stats.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Clappr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Clappr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClapprStats\"] = factory(require(\"Clappr\"));\n\telse\n\t\troot[\"ClapprStats\"] = factory(root[\"Clappr\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__clappr_core__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"latest/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/clappr-stats.js\");\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import {ContainerPlugin, Events, Log} from '@clappr/core'\nimport get from 'lodash.get'\n\n\nexport default class ClapprStats extends ContainerPlugin {\n  get name() { return 'clappr_stats' }\n  get supportedVersion() { return { min: '0.4.2' } }\n\n  get _playbackName() {return this.container.playback.name}\n  get _playbackType() {return this.container.getPlaybackType()}\n  _now() {\n    const hasPerformanceSupport = window.performance && typeof(window.performance.now) === 'function'\n    return (hasPerformanceSupport)?window.performance.now():new Date()\n  }\n  _inc(counter) {this._metrics.counters[counter] += 1}\n  _timerHasStarted(timer){return this[`_start${timer}`] !== undefined}\n  _start(timer) {this[`_start${timer}`] = this._now()}\n  _stop(timer) {this._metrics.timers[timer] += this._now() - this[`_start${timer}`]}\n  _defaultReport(metrics) {console.log(metrics)} //eslint-disable-line no-console\n\n  constructor(container) {\n    super(container)\n    this._runEach = get(container, 'options.clapprStats.runEach', 5000)\n    this._onReport = get(container, 'options.clapprStats.onReport', this._defaultReport)\n    this._uriToMeasureLatency = get(container, 'options.clapprStats.uriToMeasureLatency')\n    this._urisToMeasureBandwidth = get(container, 'options.clapprStats.urisToMeasureBandwidth')\n    this._runBandwidthTestEvery = get(container, 'options.clapprStats.runBandwidthTestEvery', 10)\n    this._bwMeasureCount = 0\n\n    this._completion = {\n      watch: get(container, 'options.clapprStats.onCompletion', []),\n      calls: []\n    }\n\n    this._newMetrics()\n    this.on(ClapprStats.REPORT_EVENT, this._onReport)\n  }\n\n  bindEvents() {\n    this.listenTo(this.container, Events.CONTAINER_BITRATE, this.onBitrate)\n    this.listenTo(this.container, Events.CONTAINER_STOP, this.stopReporting)\n    this.listenTo(this.container, Events.CONTAINER_ENDED, this.stopReporting)\n    this.listenToOnce(this.container.playback, Events.PLAYBACK_PLAY_INTENT, this.startTimers)\n    this.listenToOnce(this.container, Events.CONTAINER_PLAY, this.onFirstPlaying)\n    this.listenTo(this.container, Events.CONTAINER_PLAY, this.onPlay)\n    this.listenTo(this.container, Events.CONTAINER_PAUSE, this.onPause)\n    this.listenToOnce(this.container, Events.CONTAINER_STATE_BUFFERING, this.onBuffering)\n    this.listenTo(this.container, Events.CONTAINER_SEEK, this.onSeek)\n    this.listenTo(this.container, Events.CONTAINER_ERROR, () => this._inc('error'))\n    this.listenTo(this.container, Events.CONTAINER_FULLSCREEN, () => this._inc('fullscreen'))\n    this.listenTo(this.container, Events.CONTAINER_PLAYBACKDVRSTATECHANGED, (dvrInUse) => {dvrInUse && this._inc('dvrUsage')})\n    this.listenTo(this.container.playback, Events.PLAYBACK_PROGRESS, this.onProgress)\n    this.listenTo(this.container.playback, Events.PLAYBACK_TIMEUPDATE, this.onTimeUpdate)\n  }\n\n  destroy() {\n    this.stopReporting()\n    super.destroy()\n  }\n\n  onBitrate(newBitrate) {\n    var bitrate = parseInt(get(newBitrate, 'bitrate', 0), 10)\n    var now = this._now()\n\n    if (this._metrics.extra.bitratesHistory.length > 0) {\n      var beforeLast = this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1]\n      beforeLast.end = now\n      beforeLast.time = now - beforeLast.start\n    }\n\n    this._metrics.extra.bitratesHistory.push({start: this._now(), bitrate: bitrate})\n\n    this._inc('changeLevel')\n  }\n\n  stopReporting() {\n    this._buildReport()\n\n    clearInterval(this._intervalId)\n    this._newMetrics()\n\n    this.stopListening()\n    this.bindEvents()\n  }\n\n  startTimers() {\n    this._intervalId = setInterval(this._buildReport.bind(this), this._runEach)\n    this._start('session')\n    this._start('startup')\n  }\n\n  onFirstPlaying() {\n    this.listenTo(this.container, Events.CONTAINER_TIMEUPDATE, this.onContainerUpdateWhilePlaying)\n\n    this._start('watch')\n    this._stop('startup')\n  }\n\n  playAfterPause() {\n    this.listenTo(this.container, Events.CONTAINER_TIMEUPDATE, this.onContainerUpdateWhilePlaying)\n    this._stop('pause')\n    this._start('watch')\n  }\n\n  onPlay() {\n    this._inc('play')\n  }\n\n  onPause() {\n    this._stop('watch')\n    this._start('pause')\n    this._inc('pause')\n    this.listenToOnce(this.container, Events.CONTAINER_PLAY, this.playAfterPause)\n    this.stopListening(this.container, Events.CONTAINER_TIMEUPDATE, this.onContainerUpdateWhilePlaying)\n  }\n\n  onSeek(e) {\n    this._inc('seek')\n    this._metrics.extra.watchHistory.push([e * 1000, e * 1000])\n  }\n\n  onTimeUpdate(e) {\n    var current = e.current * 1000,\n      total = e.total * 1000,\n      l = this._metrics.extra.watchHistory.length\n\n    this._metrics.extra.duration = total\n    this._metrics.extra.currentTime = current\n    this._metrics.extra.watchedPercentage = (current / total) * 100\n\n    if (l === 0) {\n      this._metrics.extra.watchHistory.push([current, current])\n    } else {\n      this._metrics.extra.watchHistory[l-1][1] = current\n    }\n\n    if (this._metrics.extra.bitratesHistory.length > 0) {\n      var lastBitrate = this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1]\n      if (!lastBitrate.end) {\n        lastBitrate.time = this._now() - lastBitrate.start\n      }\n    }\n\n    this._onCompletion()\n  }\n\n  onContainerUpdateWhilePlaying() {\n    if (this.container.playback.isPlaying()) {\n      this._stop('watch')\n      this._start('watch')\n    }\n  }\n\n  onBuffering() {\n    this._inc('buffering')\n    this._start('buffering')\n    this.listenToOnce(this.container, Events.CONTAINER_STATE_BUFFERFULL, this.onBufferfull)\n  }\n\n  onBufferfull() {\n    this._stop('buffering')\n    this.listenToOnce(this.container, Events.CONTAINER_STATE_BUFFERING, this.onBuffering)\n  }\n\n  onProgress(progress) {\n    this._metrics.extra.buffersize = progress.current * 1000\n  }\n\n  _newMetrics() {\n    this._metrics = {\n      counters: {\n        play: 0, pause: 0, error: 0, buffering: 0, decodedFrames: 0, droppedFrames: 0,\n        fps: 0, changeLevel: 0, seek: 0, fullscreen: 0, dvrUsage: 0\n      },\n      timers: {\n        startup: 0, watch: 0, pause: 0, buffering: 0, session: 0, latency: 0\n      },\n      extra: {\n        playbackName: '', playbackType: '', bitratesHistory: [], bitrateWeightedMean: 0,\n        bitrateMostUsed: 0, buffersize: 0, watchHistory: [], watchedPercentage: 0,\n        bufferingPercentage: 0, bandwidth: 0, duration: 0, currentTime: 0\n      }\n    }\n  }\n\n  _onCompletion() {\n    let currentPercentage = this._metrics.extra.watchedPercentage\n    let allPercentages = this._completion.watch\n    let isCalled = this._completion.calls.indexOf(currentPercentage) != -1\n\n    if (allPercentages.indexOf(currentPercentage) != -1 && !isCalled) {\n      Log.info(this.name + ' PERCENTAGE_EVENT: ' + currentPercentage)\n      this._completion.calls.push(currentPercentage)\n      this.trigger(ClapprStats.PERCENTAGE_EVENT, currentPercentage)\n    }\n  }\n\n  _buildReport() {\n    this._stop('session')\n    this._start('session')\n\n    this._metrics.extra.playbackName = this._playbackName\n    this._metrics.extra.playbackType = this._playbackType\n\n    this._calculateBitrates()\n    this._calculatePercentages()\n    this._fetchFPS()\n    this._measureLatency()\n    this._measureBandwidth()\n\n    this.trigger(ClapprStats.REPORT_EVENT, JSON.parse(JSON.stringify(this._metrics)))\n  }\n\n  _fetchFPS() {\n    // flashls ??? - hls.droppedFramesl hls.stream.bufferLength (seconds)\n    // hls ??? (use the same?)\n    const fetchFPS = {\n      'html5_video': this._html5FetchFPS,\n      'hls': this._html5FetchFPS,\n      'dash_shaka_playback': this._html5FetchFPS\n    }\n\n    fetchFPS[this._playbackName] && fetchFPS[this._playbackName].call(this)\n  }\n\n  _calculateBitrates() {\n    var totalTime = this._metrics.extra.bitratesHistory.map((x) => x.time).reduce((a,b) => a + b, 0)\n    this._metrics.extra.bitrateWeightedMean = this._metrics.extra.bitratesHistory.map((x) => {\n      return x.bitrate * x.time\n    }).reduce((a,b) => a + b, 0) / totalTime\n\n    if (this._metrics.extra.bitratesHistory.length > 0) {\n      this._metrics.extra.bitrateMostUsed = this._metrics.extra.bitratesHistory.slice().sort((a,b) => a.time < b.time)[0].bitrate\n    }\n  }\n\n  _calculatePercentages() {\n    if (this._metrics.extra.duration > 0) {\n      this._metrics.extra.bufferingPercentage = (this._metrics.timers.buffering / this._metrics.extra.duration) * 100\n    }\n  }\n\n  _html5FetchFPS() {\n    const videoTag = this.container.playback.el\n    const decodedFrames = videoTag.webkitDecodedFrameCount || videoTag.mozDecodedFrames || 0\n    const droppedFrames = (videoTag.webkitDroppedFrameCount || (videoTag.mozParsedFrames - videoTag.mozDecodedFrames)) || 0\n    const decodedFramesLastTime = decodedFrames - (this._lastDecodedFramesCount || 0)\n\n    this._metrics.counters.decodedFrames = decodedFrames\n    this._metrics.counters.droppedFrames = droppedFrames\n    this._metrics.counters.fps = decodedFramesLastTime / (this._runEach / 1000)\n\n    this._lastDecodedFramesCount = decodedFrames\n  }\n\n  // originally from https://www.smashingmagazine.com/2011/11/analyzing-network-characteristics-using-javascript-and-the-dom-part-1/\n  _measureLatency() {\n    if (this._uriToMeasureLatency) {\n      var t=[], n=2, rtt\n      var ld = () => {\n        t.push(this._now())\n        if(t.length > n)\n          done()\n        else {\n          var img = new Image\n          img.onload = ld\n          img.src=this._uriToMeasureLatency + '?' + Math.random()\n          + '=' + this._now()\n        }\n      }\n      var done = () => {\n        rtt=t[2]-t[1]\n        this._metrics.timers.latency = rtt\n      }\n      ld()\n    }\n  }\n\n  // originally from https://www.smashingmagazine.com/2011/11/analyzing-network-characteristics-using-javascript-and-the-dom-part-1/\n  _measureBandwidth() {\n    if (this._urisToMeasureBandwidth && (this._bwMeasureCount % this._runBandwidthTestEvery == 0)) {\n      var i = 0\n\n      var ld = (e) => {\n        if (i > 0) {\n          this._urisToMeasureBandwidth[i-1].end = this._now()\n          clearTimeout(this._urisToMeasureBandwidth[i-1].timer)\n        }\n        if (i >= this._urisToMeasureBandwidth.length || (i > 0 && this._urisToMeasureBandwidth[i-1].expired))\n          done(e)\n        else {\n          var xhr = new XMLHttpRequest()\n          xhr.open('GET', this._urisToMeasureBandwidth[i].url, true)\n          xhr.responseType = 'arraybuffer'\n          xhr.onload = xhr.onabort = ld\n          this._urisToMeasureBandwidth[i].start = this._now()\n          this._urisToMeasureBandwidth[i].timer = setTimeout((j) => {\n            this._urisToMeasureBandwidth[j].expired = true\n            xhr.abort()\n          }, this._urisToMeasureBandwidth[i].timeout, i)\n          xhr.send()\n        }\n        i++\n      }\n\n      var done = (e) => {\n        var timeSpent = (this._urisToMeasureBandwidth[i-1].end - this._urisToMeasureBandwidth[i-1].start) / 1000\n        var bandwidthBps = (e.loaded * 8) / timeSpent\n        this._metrics.extra.bandwidth = bandwidthBps\n        this._urisToMeasureBandwidth.forEach((x) => {\n          x.start = 0\n          x.end = 0\n          x.expired = false\n          clearTimeout(x.timer)\n        })\n      }\n\n      ld()\n    }\n    this._bwMeasureCount++\n  }\n}\n\nClapprStats.REPORT_EVENT = 'clappr:stats:report'\nClapprStats.PERCENTAGE_EVENT = 'clappr:stats:percentage'\n","module.exports = __WEBPACK_EXTERNAL_MODULE__clappr_core__;"],"sourceRoot":""}